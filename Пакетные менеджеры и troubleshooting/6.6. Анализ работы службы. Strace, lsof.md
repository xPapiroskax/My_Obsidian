## **Strace**

strace позволяет перехватывать все системные запросы программы. То есть мы запускаем команду и видим всё, что она делает.

Кстати, плохая новость — grep с strace не работает.
Хорошая новость в том, что у strace есть немного собственных методов фильтрации вывода.
Здесь мы видим возможность флагом `-Z` отфильтровать вывод `strace`, чтобы он показывал только ошибки
Значит, полный синтаксис strace, который запишет вывод в файл strace1.log, будет выглядеть таким образом:

strace -o strace1.log cat test1

## **Lsof**

Вообще утилита lsof позволяет отследить, кто какие файлы использует. Например, мы помним, что логи у нас лежат в директории /var/log. Значит, чтобы проверить, какие программы используют логирование прямо сейчас, мы можем использовать команду:

lsof /var/log/*

## **Список команд**

|   |   |
|---|---|
|strace cat test|Проанализировать работу команды cat test при помощи strace|
|strace -Z cat test1|Вывести только ошибки в работе команды cat test|
|strace -o strace1.log cat test1|Проанализировать работу команды cat test при помощи strace и записать вывод strace в файл strace1.log|
|strace -p 9612|Проанализировать работу процесса (в данном случае — 9612) при помощи strace|
|lsof|Вывести список всех используемых файлов|
|lsof /var/log/*|Вывести список процессов, использующих файл(ы) (в данном случае — все файлы из директории /var/log)|
|lsof -p 748|Вывести список всех файлов, которые используются процессом (в данном случае— процессом с PID 748)|