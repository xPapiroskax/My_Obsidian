## **Файлы в папке /etc/apt/sources.list.d/**

Для самой системы это одна конфигурация, раскиданная по разным файлам. Такая разбивка делается для удобства пользователей, то есть нас. В папке `/etc/apt/sources.list.d/` обычно создаются файлы под каждый конкретный репозиторий.

Например, вам нужно что-то из пакетов _Microsoft_ — создаём отдельный файл `microsoft.list` в папке `/etc/apt/sources.list.d/` и добавляем туда репозиторий — ну, раз начали с _Debian_ 10, то давайте для него — `https://packages.microsoft.com/debian/10/prod/dists/buster/`.

Выглядеть сама строчка с репозиторием будет, например, так:

	deb https://packages.microsoft.com/debian/10/prod/dists/buster/ main

В каких случаях это удобно? Например, когда неожиданно обнаруживается, что нужный вам пакет есть и в основном репозитории, и в каком-то из тех, которые вы добавили вручную. Версии у программы при установке из разных репозиториев могут не совпадать, и иногда вспомогательный репозиторий можно отключить. Для этого мы просто перейдём в папку с репозиториями и переименуем репозиторий командой `mv`:

cd /etc/apt/sources.list.d/
mv wrong_repo.list wrong_repo.list.bak

Поэтому гораздо удобнее хранить каждый вновь добавляемый репозиторий в отдельном файле, а не дописывать всё в `/etc/apt/sources.list`.

## **GPG для шифрования**

Мало указать репозиторий — чаще всего его ещё надо сделать доверенным. Репозитории используют _gpg_-ключи для того, чтобы можно было убедиться в том, что никто не перехватил скачивание, и вы вместо безобидного _Steam_ не устанавливаете, например, какое-нибудь потенциально опасное ПО.

_Gpg_-ключ надо скачать и установить. Вот так, например, происходит процесс установки _gpg_-ключа для популярного редактора _SublimeText_:

wget -qO - https://download.sublimetext.com/sublimehq-pub.gpg | sudo apt-key add -

То есть сначала мы скачиваем ключ командой `wget` с ключами `-qO`, потом передаём его при помощи `|` в команду `apt-key add` — для установки.

## **Список команд**

|   |   |
|---|---|
|wget|Скачать файл по ссылке на сервер|
|apt-key add -|Добавить ключ для репозитория|
|apt-get update|Обновить список доступных пакетов|
|apt-get upgrade example|Обновить пакет _example_|
|apt-get --only-upgrade install example|Тоже обновить пакет _example_|
|apt-get dist-upgrade|Обновить систему (применять осторожно)|
|apt-get install example|Установить пакет _example_|
|apt-cache depends example|Узнать зависимости пакета _example_|
|apt-cache rdepends --installed example|Узнать, что зависит от пакета _example_|
|apt-get remove example|Удалить пакет _example_|
|apt-get purge example|Удалить пакет _example_ и все его зависимости|
|dpkg -i /path/to/package/example.deb|Установить имеющийся на сервере по этому пути пакет|
|apt-get -f install|Доустановить все отсутствующие зависимости|

