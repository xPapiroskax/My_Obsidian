
## **AppArmor**

AppArmor — это утилита, которая не даёт приложению делать ничего лишнего. То есть если у вас взломали веб-сервер, то _AppArmor_ не даст через веб-сервер взломать ещё, например, и почту.

Дело в том, что у _AppArmor_ есть неоспоримый плюс — он запрещает всё, что не разрешено. А ещё неоспоримый минус — он действительно запрещает всё, что не разрешено.

Помните, мы с вами говорили о том, что безопасность и лёгкость работы — это две обратно пропорциональные величины? Чем безопаснее система, тем сложнее с ней работать и, наоборот, чем легче работать с системой, тем она, как правило, менее безопасна. Очень легко и удобно заходить на сервер без паролей и ключей — но никто так делать не будет: небезопасно. И разрешать доступ на сервер только непосредственно из серверной тоже никто не будет: критически неудобно.

_AppArmor_ работает только с теми приложениями, для которых у него активированы профили. Профиль — это файл, где написано, что разрешено этому приложению. Профиль может быть включён в двух режимах: _complain_ и _enforce_. Если включён режим _complain_, то _AppArmor_ не будет ничего блокировать, а будет просто уведомлять нас, что безопасность нарушена. Если же профиль включен в режиме _enforce_, то _AppArmor_ будет производить блокировку всего, что в этом профиле не разрешено.

Чтобы посмотреть, какие модули и в каком режиме подключены, можно использовать команду:

aa-status

В выводе этой команды будет список модулей, где вы сможете увидеть, какие из них загружены и в каком режиме. А менять режимы можно командой `aa-(режим)`:

aa-complain /etc/apparmor.d/profilename

aa-enforce /etc/apparmor.d/profilename

Где _profilename_ — это имя файла с нужным профилем. Профили есть уже предустановленные, но можно загрузить из репозитория ещё пакет с дополнительными:

apt-get install apparmor-profiles

Те, кто хочет попробовать создать свой профиль — [посмотрите инструкцию](https://www.codeflow.site/ru/article/how-to-create-an-apparmor-profile-for-nginx-on-ubuntu-14-04) для создания профиля, например для веб-сервера _nginx_.